<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Community Problem Reporting</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #667eea, #764ba2);
      min-height: 100vh;
      color: #333;
    }
    h1 {
      text-align: center;
      font-weight: 700;
      margin-bottom: 25px;
      color: white;
      text-shadow: 2px 2px 10px rgba(0,0,0,0.3);
    }
    .form-section {
      max-width: 750px;
      margin: auto;
      background: rgba(255,255,255,0.9);
      padding: 35px;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      backdrop-filter: blur(10px);
      transition: transform 0.3s ease;
    }
    .form-section:hover {
      transform: translateY(-5px);
    }
    .btn-primary {
      background: linear-gradient(90deg,#667eea,#764ba2);
      border: none;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    .btn-primary:hover {
      opacity: 0.9;
      transform: scale(1.03);
    }
    table {
      margin-top: 30px;
      border-radius: 10px;
      overflow: hidden;
    }
    th {
      background: linear-gradient(90deg,#667eea,#764ba2) !important;
      color: white;
      font-weight: 600;
    }
    tr:hover {
      background-color: rgba(102, 126, 234, 0.1);
    }
    .table-responsive {
      background: white;
      border-radius: 15px;
      padding: 15px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }
    h2 {
      color: white;
      text-shadow: 1px 1px 5px rgba(0,0,0,0.3);
      font-weight: 700;
    }
  </style>
</head>
<body>

<div class="container py-5">
  <h1><i class="bi bi-flag-fill"></i> Community Problem Reporting</h1>

  <!-- Form -->
  <form id="problemForm" class="form-section">
    <div class="mb-3">
      <input type="text" class="form-control form-control-lg" id="name" placeholder="Your Name" required>
    </div>
    <div class="mb-3">
      <input type="text" class="form-control form-control-lg" id="location" placeholder="Location" required>
    </div>
    <div class="mb-3">
      <select class="form-select form-select-lg" id="type">
        <option value="Road">üöß Road Issue</option>
        <option value="Water">üíß Water Issue</option>
        <option value="Electricity">‚ö° Electricity Issue</option>
        <option value="Other">‚ùì Other</option>
      </select>
    </div>
    <div class="mb-3">
      <textarea class="form-control form-control-lg" id="description" rows="3" placeholder="Describe the problem" required></textarea>
    </div>
    <button type="submit" class="btn btn-primary w-100 btn-lg">üì¢ Report Problem</button>
  </form>

  <!-- Reported Problems Table -->
  <h2 class="text-center mt-5">üìã Reported Problems</h2>
  <div class="table-responsive mt-3">
    <table class="table table-bordered table-hover text-center align-middle" id="problemTable">
      <tr>
        <th>Name</th>
        <th>Location</th>
        <th>Type</th>
        <th>Description</th>
        <th>Status</th>
      </tr>
    </table>
  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
let problems = [];

// LocalStorage se data load karo
if(localStorage.getItem("problems")) {
  problems = JSON.parse(localStorage.getItem("problems"));
  displayProblems();
}

document.getElementById("problemForm").addEventListener("submit", function(e) {
  e.preventDefault();
  
  let name = document.getElementById("name").value;
  let location = document.getElementById("location").value;
  let type = document.getElementById("type").value;
  let description = document.getElementById("description").value;

  let problem = {name, location, type, description, status:"Pending"};
  problems.push(problem);

  // Save localStorage me
  localStorage.setItem("problems", JSON.stringify(problems));

  displayProblems();
  this.reset();
});

function displayProblems() {
  let table = document.getElementById("problemTable");
  table.innerHTML = `
    <tr>
      <th>Name</th>
      <th>Location</th>
      <th>Type</th>
      <th>Description</th>
      <th>Status</th>
    </tr>
  `;
  
  problems.forEach((p, index) => {
    table.innerHTML += `
      <tr>
        <td>${p.name}</td>
        <td>${p.location}</td>
        <td>${p.type}</td>
        <td>${p.description}</td>
        <td>
          <select class="form-select form-select-sm" onchange="updateStatus(${index}, this.value)">
            <option ${p.status==="Pending"?"selected":""}>Pending</option>
            <option ${p.status==="In Progress"?"selected":""}>In Progress</option>
            <option ${p.status==="Solved"?"selected":""}>Solved</option>
          </select>
        </td>
      </tr>
    `;
  });
}

function updateStatus(index, newStatus) {
  problems[index].status = newStatus;

  // Update localStorage me bhi
  localStorage.setItem("problems", JSON.stringify(problems));

  displayProblems();
}
</script>

</body>
</html>
